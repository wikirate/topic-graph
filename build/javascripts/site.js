(function(){var e,o,t,r,n,s,c,i,d,a,u,l,p;$.fn.select2.defaults.set("theme","bootstrap4"),e="http://localhost:3001/mod/topics/testjson",c=l=null,t={metrics:1,bookmarks:2},s={"default":{font_size:20,node_size:1,edge_size:1,topic_frameworks:["Wikirate ESG Topics"],edge_formula:(o={simple:1,topic_count:2,bookmarks:3}).topic_count,node_formula:t.metrics,edge_threshold:2,node_threshold:0,colorful:!1},solar:{font_size:20,node_size:1,edge_size:1,topic_frameworks:["Wikirate ESG Topics"],edge_formula:o.topic_count,node_formula:t.metrics,edge_threshold:2,node_threshold:130,colorful:!1},chaos:{font_size:20,node_size:1,edge_size:1,topic_frameworks:["Wikirate ESG Topics"],edge_formula:o.simple,node_formula:t.metrics,edge_threshold:1,node_threshold:1,colorful:!0},elite_connections:{font_size:20,node_size:1,edge_size:1,topic_frameworks:["Wikirate ESG Topics"],edge_formula:o.topic_count,node_formula:t.metrics,edge_threshold:1.5,node_threshold:10,colorful:!1}},d=function(){return(c=ace.edit("editor")).setTheme("ace/theme/github"),c.setOption("showLineNumbers",!1),c.session.setMode("ace/mode/yaml"),c.resize()},$(document).ready(function(){return d(),document.getElementById("topicgraph"),i(e),$("body").on("change","._topic-frameworks",function(){return l.options.topic_frameworks=$(this).val(),l.updateNodes(),p()}),$("body").on("change","._edge-threshold",function(){return l.options.edge_threshold=parseFloat($(this).val()),l.updateEdges(),p()}),$("body").on("change","._node-threshold",function(){return l.options.node_threshold=parseFloat($(this).val()),l.updateNodes(),p()}),$("body").on("change","._font-size",function(){return l.options.font_size=parseInt($(this).val()),p()}),$("body").on("change","._edge-size",function(){return l.options.edge_size=parseFloat($(this).val()),l.updateEdges(),p()}),$("body").on("change","._node-size",function(){return l.options.node_size=parseFloat($(this).val()),l.updateNodes(),p()}),$("body").on("change","#configs",function(){var e;return e=$(this).select2("data"),l.loadConfig(s[e[0].id]),l.updateEdges(),l.updateNodes(),p()}),$("body").on("change","._colorful",function(){return l.options.colorful=this.checked,l.updateNodes(),p()}),$("body").on("click","._apply-config",function(){return l.setVisConfig(c.getValue()),l.render()}),$("body").on("change","._connection-formula",function(){return l.options.edge_formula=parseInt($("input._connection-formula:checked").val()),l.updateEdges(),p()}),$("body").on("change","._node-formula",function(){return l.options.node_formula=parseInt($("input._node-formula:checked").val()),l.updateNodes(),p()})}),r={edge_threshold:"edge-threshold",node_threshold:"node-threshold",topic_frameworks:"topic-frameworks",font_size:"font-size",node_size:"node-size",edge_size:"edge-size"},a=function(e,o,t){var n,i;for(i in l=new TopicGraph(e,o,t,s["default"]),r)n=r[i],$("._"+n).val(l.options[i]);return $("input._connection-formula[value='"+l.options.edge_formula+"']").prop("checked",!0),$("input._node-formula[value='"+l.options.node_formula+"']").prop("checked",!0),$("._colorful").prop("checked",l.options.colorful),l.updateEdges(),l.updateNodes(),c.setValue(l.getVisConfig()),p()},p=function(){var e,o,t;for(e in l.render(),o=l.options)t=o[e],$("._"+r[e]).val(t);return $("._topic-frameworks").trigger("change.select2"),$("._topic-count").text(l.topic_count),$("._topic-connection-count").text(l.topic_connection_count),$("._edge-count").text(l.edges.length),$("._node-count").text(l.nodes.length)},n={cache:!(u=function(e,o){var t,n,i,r,s;for(t=$("._topic-frameworks"),n=0,r=(s=o.items).length;n<r;n++)i=s[n],t.append("<option value='"+i.name+"'>"+i.name+"</option>");return $("._select2").select2()}),dataType:"json",type:"GET",crossDomain:!0,headers:{accept:"application/json"}},i=function(e){var t;return t=document.getElementById("topicgraph"),$.ajax(Object.assign({url:e+"/Topic_Framework.json?limit=0"},n)).done(function(e){return u(t,e)}),$.ajax(Object.assign({url:e+"/Metric.json?limit=0"},n)).done(function(o){return $.ajax(Object.assign({url:e+"/Topic.json?limit=0&refilter=true"},n)).done(function(e){return a(o,e,t)})})}}).call(this);