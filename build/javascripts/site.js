(function(){var e,o,n,t,d,i,s,r,c,a,u,l,h;$.fn.select2.defaults.set("theme","bootstrap4"),e="https://wikirate.org/cached",o="https://wikirate.org",l=null,r=null,n={live:1,cached:2},t={simple:1,topic_count:2,bookmarks:3},d={metrics:1,bookmarks:2},s={"default":{font_size:20,node_size:1,edge_size:1,edge_formula:t.topic_count,node_formula:d.metrics,edge_threshold:2,node_threshold:2,colorful:!1},solar:{font_size:20,node_size:1,edge_size:1,edge_formula:t.topic_count,node_formula:d.metrics,edge_threshold:2,node_threshold:130,colorful:!1},chaos:{font_size:20,node_size:1,edge_size:1,edge_formula:t.simple,node_formula:d.metrics,edge_threshold:1,node_threshold:1,colorful:!0},elite_connections:{font_size:20,node_size:1,edge_size:1,edge_formula:t.topic_count,node_formula:d.metrics,edge_threshold:1.5,node_threshold:10,colorful:!1}},a=function(){return r=ace.edit("editor"),r.setTheme("ace/theme/github"),r.setOption("showLineNumbers",!1),r.session.setMode("ace/mode/yaml"),r.resize()},$(document).ready(function(){return $("#configs").select2(),a(),document.getElementById("topicgraph"),c(e),$("body").on("change","._edge-threshold",function(){return l.options.edge_threshold=parseFloat($(this).val()),l.updateEdges(),h()}),$("body").on("change","._node-threshold",function(){return l.options.node_threshold=parseFloat($(this).val()),l.updateNodes(),h()}),$("body").on("change","._font-size",function(){return l.options.font_size=parseInt($(this).val()),h()}),$("body").on("change","._edge-size",function(){return l.options.edge_size=parseFloat($(this).val()),l.updateEdges(),h()}),$("body").on("change","._node-size",function(){return l.options.node_size=parseFloat($(this).val()),l.updateNodes(),h()}),$("body").on("change","#configs",function(){var e;return e=$(this).select2("data"),l.loadConfig(s[e[0].id]),l.updateEdges(),l.updateNodes(),h()}),$("body").on("change","._colorful",function(){return l.options.colorful=this.checked,l.updateNodes(),h()}),$("body").on("click","._apply-config",function(){return l.setVisConfig(r.getValue()),l.render()}),$("body").on("change","._connection-formula",function(){return l.options.edge_formula=parseInt($("input._connection-formula:checked").val()),l.updateEdges(),h()}),$("body").on("change","._node-formula",function(){return l.options.node_formula=parseInt($("input._node-formula:checked").val()),l.updateNodes(),h()}),$("body").on("change","._data-source",function(){var t;return t=parseInt($("input._data-source:checked").val()),c(t===n.live?o:e)})}),i={edge_threshold:"edge-threshold",node_threshold:"node-threshold",font_size:"font-size",node_size:"node-size",edge_size:"edge-size"},u=function(e,o,n){var t,d;l=new TopicGraph(e,o,n);for(d in i)t=i[d],$("._"+t).val(l.options[d]);return $("input._connection-formula[value='"+l.options.edge_formula+"']").prop("checked",!0),$("input._node-formula[value='"+l.options.node_formula+"']").prop("checked",!0),$("._colorful").prop("checked",l.options.colorful),l.updateEdges(),l.updateNodes(),r.setValue(l.getVisConfig()),h()},h=function(){var e,o,n;l.render(),o=l.options;for(e in o)n=o[e],$("._"+i[e]).val(n);return $("._topic-count").text(l.topic_count),$("._topic-connection-count").text(l.topic_connection_count),$("._edge-count").text(l.edges.length),$("._node-count").text(l.nodes.length)},c=function(e){return $.ajax({url:e+"/Metric.json?limit=0",cache:!1,dataType:"json",type:"GET",crossDomain:!0,headers:{accept:"application/json"}}).done(function(o){return $.ajax({url:e+"/Topic.json?limit=0"},{cache:!1,dataType:"json",crossDomain:!0,headers:{accept:"application/json"}}).done(function(e){var n;return n=document.getElementById("topicgraph"),u(o,e,n)})})}}).call(this);